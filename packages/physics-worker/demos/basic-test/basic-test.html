<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Physics Worker - Phaser Demo</title>
    <link rel="stylesheet" href="./basic-test.css" />
  </head>
  <body>
    <h1>Physics Worker - Phaser Demo</h1>
    <p>Physics runs in a worker, rendering via Phaser.</p>

    <div id="controlsContainer">
      <div class="control-group">
        <h2>World Control</h2>
        <div>
          <label for="worldWidth">Width:</label>
          <input type="number" id="worldWidth" value="800" />
          <label for="worldHeight">Height:</label>
          <input type="number" id="worldHeight" value="600" />
        </div>
        <div>
          <label for="gravityX">Gravity X:</label>
          <input type="number" id="gravityX" value="0" step="0.1" />
          <label for="gravityY">Gravity Y:</label>
          <input type="number" id="gravityY" value="1" step="0.1" />
          <label for="gravityScale">Gravity Scale:</label>
          <input type="number" id="gravityScale" value="0.001" step="0.001" />
        </div>
        <button id="initWorldButton" disabled>Initialize World</button>
      </div>

      <div class="control-group">
        <h2>Add Body</h2>
        <div>
          <label for="bodyId">ID:</label>
          <input type="text" id="bodyId" placeholder="body-1" />
          <label for="bodyType">Type:</label>
          <select id="bodyType">
            <option value="rectangle">Rectangle</option>
            <option value="circle">Circle</option>
            <option value="polygon">Polygon (Sides/Radius)</option>
            <!-- <option value="fromVertices">fromVertices</option> -->
          </select>
        </div>
        <div>
          <label for="bodyX">X:</label>
          <input type="number" id="bodyX" value="100" />
          <label for="bodyY">Y:</label>
          <input type="number" id="bodyY" value="50" />
          <input type="checkbox" id="bodyIsStatic" />
          <label for="bodyIsStatic">Is Static</label>
        </div>
        <div id="rectangleInputs">
          <label for="rectWidth">Width:</label>
          <input type="number" id="rectWidth" value="50" />
          <label for="rectHeight">Height:</label>
          <input type="number" id="rectHeight" value="50" />
        </div>
        <div id="circleInputs" style="display: none">
          <label for="circleRadius">Radius:</label>
          <input type="number" id="circleRadius" value="25" />
        </div>
        <div id="polygonInputs" style="display: none">
          <label for="polygonSides">Sides:</label>
          <input type="number" id="polygonSides" value="5" min="3" />
          <label for="polygonRadius">Radius:</label>
          <input type="number" id="polygonRadius" value="25" />
        </div>
        <!-- Future: <div id="verticesInputs"> <label for="bodyVertices">Vertices (JSON):</label> <textarea id="bodyVertices">[{x:0,y:0},{x:50,y:0},{x:25,y:25}]</textarea> </div> -->
        <div>
          <!-- Options (IBodyDefinition JSON) could be a textarea here -->
        </div>
        <button id="addBodyButton" disabled>Add Body</button>
      </div>

      <div class="control-group">
        <h2>Remove Body</h2>
        <label for="removeBodyId">ID to Remove:</label>
        <input type="text" id="removeBodyId" placeholder="body-1" />
        <button id="removeBodyButton" disabled>Remove Body</button>
      </div>

      <div class="control-group">
        <h2>Simulation Step</h2>
        <label for="stepDeltaTime">DeltaTime (ms):</label>
        <input type="number" id="stepDeltaTime" value="16.666" step="any" />
        <button id="stepButton" disabled>Step Simulation</button>
      </div>

      <div class="control-group">
        <h2>Advance Simulation Time</h2>
        <label for="advanceTotalDeltaTime">Total DeltaTime (ms):</label>
        <input type="number" id="advanceTotalDeltaTime" value="100" />
        <label for="advanceInternalStepSize"
          >Internal Step (ms, optional):</label
        >
        <input
          type="number"
          id="advanceInternalStepSize"
          value="16.666"
          step="any"
          placeholder="Default ~16.66ms"
        />
        <button id="advanceTimeButton" disabled>Advance Time</button>
      </div>

      <div class="control-group">
        <h2>General</h2>
        <button id="loopButton" disabled>Run Physics Loop (5s)</button>
        <button id="resetSimulationButton" disabled>Reset Simulation</button>
        <button id="terminateButton" disabled>Terminate Worker</button>
      </div>

      <!-- Old buttons to be removed or re-purposed by JS -->
      <div id="oldControls" style="display: none">
        <button id="addRectButtonOld">Add Rectangle (Old)</button>
        <button id="addCircleButtonOld">Add Circle (Old)</button>
        <button id="removeLastButtonOld">Remove Last Body (Old)</button>
      </div>
    </div>

    <div id="phaser-container"></div>

    <h2>Log:</h2>
    <pre id="logOutput">Initializing...</pre>

    <script type="module" src="./basic-test.js"></script>
  </body>
</html>
