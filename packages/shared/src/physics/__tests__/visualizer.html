<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Physics Scenario Visualizer</title>
    <link rel="stylesheet" href="./visualizer.css" />
  </head>
  <body>
    <h1>Physics Scenario Visualizer</h1>
    <div class="controls">
      <label for="scenario-select">Select Scenario:</label>
      <select id="scenario-select">
        <option value="">--Select a Scenario--</option>
      </select>
      <button id="play-pause-button">Play</button>
      <button id="reset-button">Reset</button>
      <span style="margin-left: 15px">
        <input type="checkbox" id="debug-logging-checkbox" checked />
        <label for="debug-logging-checkbox">Enable Debug Logging</label>
      </span>
    </div>

    <div id="main-content-area">
      <div id="state-playground-container">
        <h2>State Playground (toJSON)</h2>
        <textarea
          id="state-json-display"
          readonly
          rows="20"
          cols="60"
        ></textarea>
      </div>

      <div id="render-control-playground-container">
        <h2>Render &amp; Sim Control</h2>
        <div class="info-section">
          <h3>Render Info</h3>
          <p>Canvas Dimensions: <span id="render-canvas-dims">N/A</span></p>
          <p>View Bounds (World): <span id="render-view-bounds">N/A</span></p>
          <p>Zoom/Scale (Approx X): <span id="render-zoom-level">N/A</span></p>
          <p>Current Tick: <span id="render-current-tick">0</span></p>
          <p>
            Total Scenario Steps: <span id="scenario-total-steps">N/A</span>
          </p>
        </div>
        <div class="control-section">
          <h3>Simulation Controls</h3>
          <button id="step-once-button" title="Advance simulation by one tick">
            Step 1 Tick
          </button>
          <div>
            <label for="step-n-ticks-input">N:</label>
            <input
              type="number"
              id="step-n-ticks-input"
              value="10"
              min="1"
              style="width: 60px; margin-right: 5px"
            />
            <button id="step-n-button" title="Advance simulation by N ticks">
              Step N Ticks
            </button>
          </div>
          <div>
            <label for="step-m-seconds-input">Secs:</label>
            <input
              type="number"
              id="step-m-seconds-input"
              value="1"
              min="0.1"
              step="0.1"
              style="width: 60px; margin-right: 5px"
            />
            <button id="step-m-button" title="Run simulation for M seconds">
              Run M Secs
            </button>
          </div>
          <!-- The main Play/Pause button is in the top controls. We might later consolidate or enhance. -->
        </div>
      </div>

      <div id="matter-container"></div>
    </div>

    <script src="../../../node_modules/poly-decomp/build/decomp.js"></script>
    <script type="module" src="./visualizer.ts"></script>
  </body>
</html>
